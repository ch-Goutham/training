<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <Script>
        //Promise:
    // A promise a special javascript object that represents the eventual completion(or failure) of
    //an asynchronous operation.
    //It allows to handle asynchronous tasks more efficiently that callbacks 
    //Three States:
    //1). pending: The initial state, the promise is still waiting for the operation to finish
    //2). fulfilled: The operation completed successfully
    //3). Rejected: The operation failed

    //EXP:
    //1. To create a promise - new promise()
    //Two parameters-
    //resove ---- to mark the promise as succcessfully
    //reject ---- to mark the promise as failed

    //2. handling the result:
    //.then() method is called when promise is fulfilled
    //It will recevies the result from resolve()
    //.catch() method is called if the promise is rejected it receives the error message from reject()

    //Example:

    let mypromise = new Promise((resolve, reject) => {
    let success = true;
    if(success){
        resolve("Promise is resolved");
    }else{
        reject("Promise is rejected");
    }
    });
    mypromise
    .then((result)=>{
        console.log(result);
    });
    mypromise
    .catch((error)=>{
    console.log(error);
    })

    //Changing promises:
    //Ex:
    
    let promise = new Promise((resolve, reject) => {
        resolve(5);
        //initial resolve value is 5

    });

    promise.then((result)=>{
        console.log(result);
        return result * 2
        //return a new value
    })
    .then((result)=>{
        console.log(result);
        return result + 3
        //return a new value
    })
    .then((result)=>{
        console.log(result);
    })
    .catch(error=>{
        console.log("error", error)
    })

    //Ex: promise with setTimeout
    //--asynchronous task using setTimeout and the prmise will resolve after a certain amount of time

    let pro=new Promise((resolve,reject)=>{
        resolve(10);
    })
    pro.then(result=>{
        console.log(result)
        setTimeout((pro)=>{
            console.log("success")
        },3000)
    })
    //Ex:2

    let fetchData = new Promise((resolve, reject) => {
        let datafetched = true;
        setTimeout(()=>{
            if(datafetched){
                resolve("data fetched");
            }
        },2000)
    })
    fetchData.then((result)=>{
        console.log(result)
    })
    .catch((error)=>{
        console.log("error", error)
    })
  </Script>
</body>
</html>